#!/bin/bash

providers="dfn,telekom"

for provider in dfn telenor uninett telekom ; do
   if [[ "$providers" =~ ^$|^$provider$|^$provider,|,$provider,|,$provider$ ]] ; then
      echo "p=$provider"

   else
      echo "SKIP $provider"
   fi
done


echo "-----"


availableProviders="dfn,telekom,tele2"
selectedProviders="dfn,telekom,uninett"


checkProviders () {
   local availableProviders="$1"
   local selectedProviders="$2"
   local oldIFS=$IFS
   IFS=","
   for provider in $selectedProviders ; do
      echo "p=$provider"
      if [[ ! "$availableProviders" =~ ^$|^$provider$|^$provider,|,$provider,|,$provider$ ]] ; then
         echo >&2 "ERROR: Provider \"$provider\" is not in the list of available providers \"$availableProviders\"!"
         exit 1
      fi
   done
   IFS=$oldIFS
}

checkProviders "$availableProviders" "$selectedProviders"
